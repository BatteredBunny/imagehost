version: "3.7"

services:
  imagehost:
    container_name: imagehost
    image: ayay2021/imagehost
    build: ./
    environment:
      - PUID=1000
      - PGID=1000
      - UMASK=002
      - TZ=Etc/UTC
    ports:
      - "8080:80"
    volumes:
      - ./imagehost-data:/app/data
      # - ./example_docker.toml:/app/config.toml
    depends_on:
      - db
    restart: unless-stopped

  db:
    container_name: postgres_imagehost
    image: postgres
    ports:
      - "5433:5432"
    environment:
      - POSTGRES_PASSWORD=123
      - POSTGRES_USER=postgres
      - POSTGRES_DB=imagehost
    restart: unless-stopped
